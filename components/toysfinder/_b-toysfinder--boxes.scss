@mixin box-starburst($color: color(yellow)) {
    background-image: svg-uri("<svg viewBox=\"0 0 135 178\" fill=\"#{$color}\" preserveAspectRatio=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><path fill-rule=\"evenodd\" d=\"m117.6 144.6h-6.5c-1.5-0.1-2.9 0.6-3.6 1.9l-4.6 5.6s-2 2.7-3-0.8c0 0-2-7.3-2-7.4-0.2-0.6-0.4-1.5-2.3-2.2l-6.9-2.7c-0.8-0.3-2.7-1.3 0.2-3l5.6-3.2c1.3-0.6 2.2-1.9 2-3.4l-0.3-7.2s-0.2-4.3 2.6-1.7c2.9 2.6 5.3 4.4 6.1 4.9 1 0.8 2.2 0.9 3.3 0.6 0.6-0.2 5.6-1.9 6.8-2.2l0.1 0.1s3.8-1.5 2.2 2.6c0 0-2.6 7-2.6 7.1-0.3 1-0.1 2.1 0.6 2.9 0.5 0.6 3.3 4.9 3.8 5.6s2 2.7-1.5 2.5zm8.6-69.1c-3.5-2.9-3.8 1.1-3.8 1.1v9.7c0.2 1.5-0.5 2.9-1.7 3.8l-8.3 6c-3.9 2.9 0.3 4 0.3 4l9.1 3c1.9 0.3 3.5 1.7 4 3.5 0.9 2.4 2.9 8.1 2.9 8.1 1.4 4.3 3.3 1.6 4 0.6 0.3-0.4 1.2-1.7 2.1-3v-30.1c-0.8-0.2-1.6-0.6-2.2-1.2-0.7-0.7-6.4-5.5-6.4-5.5zm-118.4 72.4c0.9 2.4 2.9 8.1 2.9 8.1 1.4 4.3 3.3 1.6 4 0.6 0.8-1 4.7-6.5 5.2-7.4 0.6-1.3 1.9-2 3.3-2h10.1c5.7 0.1 2.2-3.9 2.2-3.9h-0.1c-1-1.3-5.4-6.8-5.9-7.4-1-1.3-1.3-2.9-0.9-4.4 0.4-1.3 1.5-5 3.3-9.8s-3.4-2.5-3.4-2.5l-8.6 3.8c-1.7 0.8-3.8 0.5-5.1-0.9l-6.6-5.4c-3.5-2.9-3.8 0.1-3.8 1.1 0.1 1-0.1 8.6-0.1 9.7 0.2 1.5-0.4 2.9-1.7 3.8l-2.6 1.9v10l3.8 1.2c1.9 0.2 3.5 1.6 4 3.5zm43-107.3c0.3 0.3 0.4 0.8 0.2 1.3-0.2 0.7-0.6 2-0.6 2-0.3 1 0.5 0.8 0.7 0.7s1.8-0.6 2-0.6c0.3-0.2 0.6-0.1 0.9 0.1l1.9 1.5c1 0.9 1-0.4 1-0.4v-0.2-2.2c0-0.4 0.2-0.8 0.5-1 0.2-0.2 1-0.8 2-1.4 1-0.7-0.3-1-0.3-1l-2.2-0.6c-0.4-0.1-0.8-0.4-0.8-0.9 0-0.3-0.4-2-0.4-2-0.2-1-0.7-0.6-0.8-0.3l-1.5 1.9c-0.2 0.3-0.6 0.5-0.9 0.5h-2.5c-1.2 0-0.6 0.8-0.6 0.8l1.4 1.8zm19.5 41c-0.7 1.3 0.3 1.1 0.7 1 0.3-0.1 2.4-0.4 2.7-0.4 0.4-0.1 0.8 0 1.1 0.3l2 2.2c1.2 1.3 1.3-0.3 1.3-0.3l0.1 0.1c0.2-1 0.3-1.9 0.4-2.9 0.1-0.5 0.3-0.9 0.8-1.1 0.3-0.1 1.4-0.8 2.9-1.3 1.5-0.6-0.1-1.3-0.1-1.3l-2.6-1.2c-0.6-0.2-0.9-0.8-0.9-1.3l-0.1-2.6c-0.1-1.4-0.8-0.8-1-0.6l-2.2 2c-0.3 0.3-0.8 0.5-1.2 0.4l-3.1-0.6c-1.5-0.3-0.8 0.9-0.8 0.9l1.3 2.6c0.3 0.5 0.3 1.1 0 1.6-0.5 0.9-1.3 2.5-1.3 2.5zm24.6-50.2l1.5 1.3c0.3 0.2 0.6 0.6 0.5 1v1.8c-0.1 0.9 0.6 0.6 0.8 0.4l1.6-1c0.2-0.2 0.5-0.3 0.8-0.1l2 0.8c1.1 0.5 0.7-0.6 0.7-0.6l-0.1-0.1c-0.1-0.3-0.6-1.7-0.6-1.9-0.1-0.3-0.1-0.6 0.1-0.9 0.1-0.2 0.7-0.8 1.4-1.6s-0.5-0.8-0.5-0.8h-2c-0.4 0.1-0.8-0.2-0.9-0.6l-0.8-1.6c-0.4-0.7-0.8-0.2-0.8 0-0.1 0.2-0.6 1.3-0.8 1.9s-0.4 0.6-0.6 0.6l-2 0.6c-1.1 0.3-0.3 0.8-0.3 0.8zm-3.7 73.2c2.1-1 0-1.9 0-1.9l-0.1-0.1c-0.6-0.3-3.3-1.5-3.6-1.7-0.6-0.3-1-0.8-1.2-1.5-0.1-0.6-0.4-2.2-0.6-4.3s-1.7-0.2-1.7-0.2l-2.6 3.1c-0.5 0.6-1.3 0.8-2 0.6l-3.3-0.7c-1.8-0.4-1.4 0.8-1.2 1.2 0.2 0.3 1.6 3.3 1.8 3.7 0.3 0.6 0.3 1.3 0 1.8l-2 3.8c-0.9 1.9 0.9 1.5 0.9 1.5l4-0.6c0.8-0.3 1.6-0.1 2.2 0.6 0.8 0.8 2.6 2.5 2.6 2.5 1.3 1.5 1.5-0.1 1.6-0.6s0.6-3.3 0.6-3.8c0-0.6 0.3-1.1 0.8-1.4l3.8-2zm-51.3-19.9c-0.9-0.1-5.6-0.3-6.4-0.3-1 0.1-1.9-0.3-2.4-1.2l-3.8-6c-2.1-3.5-3.1 0.1-3.1 0.1l0.1-0.1c-0.4 1.1-2.1 5.8-2.2 6.3-0.3 1-1.3 1.9-2.3 2.2-2.4 0.6-4.7 1.2-7.1 1.7-3.5 0.8-0.2 3-0.2 3l5.5 3.6c1.1 0.7 1.7 2.1 1.3 3.4-0.1 0.8-0.8 6-0.8 6-0.5 3.1 1.5 2.2 2 1.9s5.2-3.1 5.9-3.5c0.8-0.6 1.9-0.8 2.9-0.4l6.7 2.7c3.3 1.3 2.4-1.7 2.4-1.7l-1.6-6.6c-0.6-1.3-0.3-2.7 0.6-3.7 1-1.5 3.7-4.7 3.7-4.7 2.1-2.5-0.3-2.6-1.2-2.7zm-27.3-20.4l1.6 4.2c0.7 2 1.7 0.4 1.7 0.4l2.4-3.5c0.3-0.8 1.2-1.3 2-1.2 1.1-0.1 3.7-0.2 3.7-0.2 1.9 0 1.2-1.2 0.8-1.6s-2.2-2.8-2.4-3.1c-0.4-0.4-0.6-1-0.4-1.6l1.3-4.2c0.8-2.4-1.3-1.4-1.3-1.4h-0.1c-0.7 0.2-3.5 1.4-3.8 1.5-0.7 0.3-1.4 0.2-2-0.2-0.4-0.3-1.8-1.3-3.6-2.6-1.7-1.3-1.5 1.1-1.5 1.1l0.5 4.1c0.1 0.8-0.3 1.6-1 2l-3.1 2c-1.6 1-0.4 1.6 0 1.7l4 1.3c0.9 0.5 1.1 1 1.2 1.3zm49.8 28.8l3.3-1.2c1.6-0.6 0.3-1.4 0.3-1.4l-2.7-1.9c-0.6-0.3-1-0.9-1-1.6-0.2-0.9-0.2-2.9-0.2-2.9-0.1-1.5-0.9-0.9-1.3-0.6s-2.2 1.7-2.4 2c-0.4 0.5-0.9 0.6-1.4 0.5l-3.3-1c-1.9-0.6-1.1 1.1-1.1 1.1l-0.2-0.1c0.4 1 0.8 2 1.3 3.1 0.3 0.5 0.3 1 0 1.5-0.2 0.3-0.9 1.5-2 2.9s0.9 1.1 0.9 1.1l3.3-0.4c0.6-0.1 1.3 0.3 1.6 0.8l1.7 2.4c0.9 1.3 1.4 0.3 1.4 0 0.3-1.1 0.7-2.4 1-3.3 0.1-0.8 0.5-0.8 0.8-1zm24.1-25.1l4.6 0.4c1 0 1.8 0.7 2 1.6 0.2 0.6 1.6 3.9 1.6 3.9 0.8 2 1.6 0.8 1.9 0.4s2-3.7 2.3-4.2c0.3-0.7 0.9-1.2 1.6-1.3l4.9-0.7c2.3-0.4 0.8-1.9 0.8-1.9l-3.2-3.4c-0.8-0.6-1.1-1.5-0.9-2.4 0.1-1.2 0.6-4 0.6-4 0.4-2.2-1-1.5-1.6-1.2s-3.5 1.7-3.9 2c-0.6 0.4-1.3 0.5-1.9 0.1l-4.3-2.1c-2.4-1.4-1.8 1.2-1.8 1.2 0.2 1.5 0.5 2.9 0.8 4.4 0.1 0.8-0.1 1.5-0.6 2-0.5 0.4-1.8 1.8-3.7 3.4-2 1.6 0.8 1.8 0.8 1.8zm-51-67.2c-0.3 0.6-1.7 3.3-1.8 3.7-0.3 0.6-0.9 1-1.6 1.2-0.6 0.1-2.2 0.3-4.5 0.5-2.3 0.1-0.4 1.8-0.4 1.8l3.2 2.7c0.6 0.6 0.8 1.5 0.6 2.2l-1 3.5c-0.5 1.9 0.7 1.5 1.1 1.3l3.9-1.7c0.6-0.3 1.3-0.3 1.8 0l4 2.3c1.9 1 1.6-0.9 1.6-0.9l-0.5-4.2c-0.2-0.8 0-1.7 0.7-2.2l2.6-2.6c1.5-1.4 0-1.7-0.6-1.7-0.6-0.1-3.5-0.7-3.9-0.7-0.6-0.1-1.1-0.4-1.4-1l-1.9-4c-0.2-0.5-0.4-0.8-0.7-0.9h-0.8c-0.2 0.2-0.4 0.7-0.4 0.7zm42.9 124.8c-0.4-0.1-3.8-0.2-4.2-0.2-0.6 0-1.3-0.3-1.7-0.8l-2.5-3.7c-1.3-1.8-1.8 0-1.8 0l-1.5 4c-0.1 0.8-0.8 1.5-1.6 1.7-1 0.4-3.5 1.2-3.5 1.2-1.9 0.6-0.7 1.5-0.3 1.8 0.5 0.3 2.8 2.2 3.2 2.4 0.6 0.3 0.9 0.8 0.8 1.5 0 0.1-0.1 4.4-0.1 4.4-0.1 2.6 1.7 1 1.7 1 1.1-0.8 2.2-1.6 3.1-2.5 0.6-0.5 1.3-0.6 1.9-0.3 0.6 0.2 2.2 0.8 4.2 1.6 2.1 0.8 1.2-1.5 1.2-1.5l-1.5-3.8c-0.3-0.8-0.1-1.7 0.5-2.2l2.5-2.8c1.4-1.6 0.1-1.8-0.4-1.8zm55.3 36l-4.2-0.2c-0.6 0.1-1.3-0.2-1.7-0.8l-2.7-3.6c-1.3-1.8-1.8 0-1.8 0l-1.5 4c-0.1 0.8-0.8 1.5-1.6 1.7-1 0.4-3.5 1.2-3.5 1.2-1.9 0.6-0.7 1.4-0.3 1.7 0.5 0.3 2.8 2.2 3.2 2.4 0.6 0.3 0.8 0.8 0.8 1.5 0 0.1-0.1 4.4-0.1 4.4-0.1 2.6 1.7 1 1.7 1v-0.1l3.3-2.4c0.6-0.5 1.3-0.6 2-0.3 0.6 0.2 2.2 0.8 4.2 1.6s1.2-1.5 1.2-1.5l-1.5-3.8c-0.3-0.8-0.1-1.7 0.5-2.2l2.5-2.9c1.2-1.5 0-1.7-0.5-1.7zm-33.2 10.4c1.9-2.2 0-2.6-0.7-2.6l-6.6-0.3c-1 0.1-1.9-0.3-2.5-1.2-0.1-0.1-3.9-5.7-3.9-5.7-1.9-2.7-2.8 0.1-2.8 0.1l-2.2 6c-0.6 1.9-1.3 2.2-2.4 2.6-1.6 0.6-5.4 1.8-5.4 1.8-2.9 0.8-1.2 2.2-0.5 2.7 0.4 0.3 1.9 1.5 3.2 2.4h19.2c0.1-0.6 0.4-1.2 0.9-1.7l3.7-4.1zm-69.9 5.3c-0.5-0.3-2.5-1.1-2.7-1.1-0.4-0.2-0.8-0.6-0.9-1-0.1-0.3-0.3-1.5-0.6-3.1-0.2-1.5-1.3-0.1-1.3-0.1l-1.7 2.4c-0.3 0.5-0.9 0.7-1.5 0.6l-2.6-0.4c-1.4-0.3-1 0.6-0.8 0.8l1.5 2.6h11.3c0.1-0.4-0.7-0.7-0.7-0.7zm24.2-9.9l-2.2-0.2c-0.4 0-0.7-0.2-0.9-0.6-0.1-0.2-0.6-1.1-1.1-2.2s-1 0.1-1 0.1l-0.8 2c-0.1 0.4-0.6 0.7-1 0.7l-2 0.2c-1 0.1-0.6 0.6-0.4 0.8l1.6 1.7c0.3 0.4 0.3 0.8 0.3 0.9s-0.3 2.4-0.3 2.4c-0.1 1.2 0.8 0.6 0.8 0.6l2-1c0.3-0.3 0.8-0.3 1.3 0l1.9 0.8c1 0.5 0.8-0.4 0.8-0.6-0.1-0.2-0.4-1.8-0.4-2-0.1-0.3 0-0.6 0.2-0.9l1.7-1.7c0.7-1-0.5-1-0.5-1zm22-16.3l-0.1 0.6-2.2-0.2c-0.4 0-0.7-0.2-0.9-0.6-0.1-0.2-0.6-1.1-1.1-2.2-0.5-1.2-1 0.1-1 0.1l-0.8 2c-0.1 0.4-0.6 0.7-1 0.7l-2 0.2c-1 0.1-0.6 0.7-0.4 0.8s1.5 1.5 1.7 1.7c0.3 0.2 0.4 0.6 0.3 0.9l-0.3 1.9c-0.1 1.2 0.8 0.6 0.8 0.6l2-1c0.3-0.3 0.8-0.3 1.3 0l1.9 0.8c1 0.5 0.8-0.2 0.8-0.6-0.1-0.3-0.4-1.9-0.4-2.2-0.1-0.3 0-0.7 0.2-0.9l1.7-1.7c0.9-0.9-0.5-0.9-0.5-0.9zm-20-37.7c-0.3-0.1-2-0.2-2.2-0.1-0.3 0-0.6-0.2-0.8-0.6-0.1-0.2-0.6-1.1-1.1-2.2-0.6-1.1-1 0.1-1 0.1l-0.8 2c-0.2 0.4-0.6 0.7-1 0.7l-2 0.2c-1 0.1-0.6 0.6-0.4 0.8l1.6 1.7c0.3 0.2 0.5 0.6 0.4 0.9 0 0.1-0.3 2.4-0.3 2.4-0.1 1.2 0.8 0.6 0.8 0.6l2-1c0.3-0.3 0.8-0.3 1.3 0l1.8 0.8c1 0.5 0.8-0.3 0.8-0.6-0.1-0.3-0.4-1.9-0.4-2.2-0.1-0.3 0-0.7 0.2-0.9l1.7-1.7c0.7-0.9-0.6-0.9-0.6-0.9z\"/></svg>");
}

@mixin box-knot($color: color(yellow)) {
    background-image: svg-uri("<svg viewBox=\"0 0 50 22\" fill=\"#{$color}\" preserveAspectRatio=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><path id=\"badgeshape\" fill-rule=\"evenodd\" d=\"m24.5 22c-11.3-1.4-18.8-3.9-22.3-7.6-3-3.1-3-7-0.1-10.7 2.3-2.9 7-5.1 12-2.9 4.4 2 7.4 6.2 10.9 15.8 3.4-9.4 6.5-13.8 10.9-15.7 4.9-2.1 9.7 0 12 2.9 2.9 3.7 2.9 7.6-0.1 10.7-3.4 3.6-11 6.2-22.4 7.6m14.5-19.1c-0.9 0-1.9 0.2-2.8 0.6-3.1 1.3-6 4.5-9.7 15.2 11.5-1.7 16.2-4.3 18.1-6.3s1.9-4.3-0.1-6.8c-1.1-1.5-3.1-2.7-5.5-2.7zm-29.8 0c-2.4 0-4.4 1.2-5.5 2.6-2 2.5-2 4.8-0.1 6.8s6.6 4.7 18 6.3c-3.7-10.7-6.5-13.8-9.6-15.1-1-0.4-1.9-0.6-2.8-0.6z\"/></svg>");
}

@mixin box-firework($color1: color(yellow), $color2: color(blue, light), $color3: color(green, light), $color4: color(teal)) {
    background-image: svg-uri("<svg viewBox=\"0 0 276 138\" preserveAspectRatio=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"m68.7 89.7l4.3 0.4c0.9 0 1.7 0.7 1.9 1.5 0.2 0.6 1.5 3.7 1.5 3.7 0.8 1.9 1.5 0.8 1.8 0.4s1.9-3.5 2.2-4c0.3-0.7 0.8-1.1 1.5-1.2l4.6-0.7c2.2-0.4 0.8-1.8 0.8-1.8l-3-3.2c-0.8-0.6-1-1.4-0.8-2.3 0.1-1.1 0.6-3.8 0.6-3.8 0.4-2.1-0.9-1.4-1.5-1.1s-3.3 1.6-3.7 1.9c-0.6 0.4-1.2 0.5-1.8 0.1l-4.1-2c-2.3-1.3-1.7 1.1-1.7 1.1 0.2 1.4 0.5 2.7 0.8 4.1 0.1 0.8-0.1 1.4-0.6 1.9s-1.7 1.8-3.5 3.3c-1.9 1.6 0.7 1.7 0.7 1.7z\" fill=\"#{$color1}\"/><path d=\"m192.8 78.1l2.8 3.3c0.7 0.7 0.7 1.7 0.3 2.4-0.3 0.5-1.5 3.7-1.5 3.7-0.8 1.9 0.5 1.6 1 1.5s3.8-1.1 4.3-1.3c0.7-0.3 1.4-0.2 1.9 0.2l3.7 2.8c1.8 1.3 1.8-0.7 1.8-0.7l0.1-4.4c-0.1-0.9 0.3-1.7 1-2.2 0.9-0.7 3.1-2.3 3.1-2.3 1.7-1.2 0.3-1.7-0.3-1.9s-3.5-1.2-3.9-1.3c-0.7-0.1-1.2-0.5-1.3-1.2l-1.5-4.3c-0.7-2.5-2-0.4-2-0.4-0.9 1.1-1.6 2.3-2.4 3.5-0.5 0.6-1.1 0.9-1.7 0.9-0.6-0.1-2.4 0-4.7-0.2-2.4-0.1-0.7 1.9-0.7 1.9z\" fill=\"#{$color1}\"/><circle cx=\"33.7\" cy=\"123.8\" r=\"8\" fill=\"#{$color2}\"/><circle cx=\"192.1\" cy=\"8\" r=\"8\" fill=\"#{$color2}\"/><path d=\"m8.8 45.7l-7.8-9.3c-0.7-0.8-0.6-2.1 0.2-2.8l9.2-7.8c0.8-0.7 2.1-0.6 2.8 0.2l7.8 9.2c0.7 0.8 0.6 2.1-0.2 2.8l-9.2 7.8c-0.8 0.8-2.1 0.7-2.8-0.1z\" fill=\"#{$color3}\"/><path d=\"m220.2 129.4l5.1-10.9c0.5-1 1.7-1.4 2.7-1l10.9 5.1c1 0.5 1.4 1.7 1 2.7l-5.1 10.9c-0.5 1-1.7 1.4-2.7 1l-10.9-5.1c-1-0.5-1.5-1.7-1-2.7z\" fill=\"#{$color3}\"/><path d=\"m117.8 22.2l-13.8 5c-0.9 0.3-1 1.1-0.3 1.7l11.2 9.4c0.7 0.6 1.5 0.3 1.6-0.6l2.5-14.5c0.3-0.8-0.3-1.3-1.2-1z\" fill=\"#{$color4}\"/><path d=\"m276.7 72.7l-13.7-5.3c-0.9-0.3-1.5 0.1-1.3 1.1l2.3 14.5c0.1 0.9 0.9 1.2 1.6 0.6l11.4-9.2c0.8-0.6 0.6-1.4-0.3-1.7z\" fill=\"#{$color4}\"/></svg>");
}

$box-gutter: baseline(1.5);
$box-width: rem(102);
$box-height: rem(135);
$box-width-active: rem(135);
$box-height-active: rem(178);

.b-toysfinder__refinement--box {
    min-height: baseline(23);
    padding-top: baseline(10);

    .b-toysfinder__clear + & {
        padding-top: baseline(4);
    }

    .b-toysfinder__refinement-list {
        font-size: 0;
        margin: 0 auto;
        max-width: 100%;
        text-align: center;
        white-space: nowrap;
        width: ($box-width + 2 * $box-gutter) * 5;

        @media (--extra-small) {
            line-height: $box-height-active;
            width: $box-width + 2 * $box-gutter;
        }
    }

    .b-toysfinder__refinement-item {
        display: inline-block;
        vertical-align: top;

        @media (--extra-small) {
            line-height: normal;
            vertical-align: bottom;
        }
    }

    .slick-list {
        height: $box-height;
        overflow: visible;
    }

    .slick-track {
        height: $box-height-active;
    }

    .slick-slide {
        @media (--from-small) {
            opacity: 0;
            pointer-events: none;

            &.slick-center,
            &.slick-active {
                opacity: 1;
                pointer-events: auto;
            }
        }
    }

    .slick-arrow {
        margin: 0 baseline(-10);

        @media (--small) and (--portrait) {
            margin: 0 baseline(-7.5);
        }
    }
}

.b-toysfinder__box {
    $box-colors: (
        (color(purple, deep), color-burn),
        (color(green, light), overlay   ),
        (color(teal),         color-burn),
        (color(blue, light),  color-burn),
        (color(yellow),       color-burn),
        (color(pink),         color-burn)
    );
    $box-count: length($box-colors);
    @include transition((transform, opacity));

    padding: 0 $box-gutter;
    position: relative;
    transform: scale(1);
    transform-origin: 50% 0;

    @media (--extra-small) {
        transform-origin: 50% 100%;
    }

    .b-toysfinder__step#{$const-selected} & {
        transform: scale(1) translate3d(-#{($box-width-active - $box-width) / 2}, 0, 0);
    }

    &.m-selected ~ .b-toysfinder__box {
        transform: scale(1) translate3d(#{($box-width-active - $box-width) / 2}, 0, 0);
    }

    &#{$const-selected}#{$const-selected} {
        transform: scale(1.32);
    }

    &::before,
    &::after {
        bottom: 98%;
        content: "";
        left: 50% rtl-ignore();
        position: absolute;
    }

    // Knot
    &::after {
        @include box-knot(color(purple, deep));
        @include transition(transform);

        height: rem(22);
        transform: translate3d(-50%, 0, 0) scale(1) rtl-ignore();
        transform-origin: 50% 100%;
        width: rem(50);
    }

    // Doll
    &::before {
        @include transition((transform, visibility));
        @include i-content;
        @include i-content--doll;

        font-size: baseline(11);
        pointer-events: none;
        transform: translate3d(-50%, 100%, 0) rtl-ignore();
        visibility: hidden;
        z-index: -1; // fix issue of occasional Doll image jumping to foreground on swipe
    }

    .b-toysfinder__refinement-value {
        @include box-starburst(#b8b8b8);

        align-items: center;
        background-blend-mode: color-burn;
        background-color: color(purple, deep);
        border-radius: $border-radius-small;
        color: color(white);
        display: flex;
        font-family: $font-family-akcent;
        font-size: rem(30);
        height: $box-height;
        line-height: 1;
        margin: 0 auto;
        position: relative;
        text-align: center;
        text-decoration: none;
        width: $box-width;
        z-index: $z-min;

        // Firework
        &::before {
            @include transition((transform, opacity));
            @include box-firework;

            bottom: 100%;
            content: "";
            height: rem(138);
            left: 50% rtl-ignore();
            opacity: 0;
            pointer-events: none;
            position: absolute;
            transform: translate3d(-50%, 0, 0) scale(0.25) rtl-ignore();
            transform-origin: 50% 100%;
            width: rem(276);
        }
    }

    @for $i from 1 through $box-count {
        $color-set: nth($box-colors, $i);

        &:nth-child(#{$box-count}n + #{$i}) {
            &::after {
                @include box-knot(nth($color-set, 1));
            }

            .b-toysfinder__refinement-value {
                background-blend-mode: nth($color-set, 2);
                background-color: nth($color-set, 1);
            }
        }
    }

    .b-toysfinder__refinement-text {
        background-color: color(blue);
        margin-top: baseline(0.5);
        padding: baseline(2) baseline(0.5);
        position: relative;
        width: 100%;

        > div {
            font-family: $font-family-main;
            font-size: 0.45em;
        }
    }

    &#{$const-selected} {
        // Knot
        &::after {
            transform: translate3d(-50%, 100%, 0) scale(0) rtl-ignore();
        }

        // Doll
        &::before {
            transform: translate3d(-50%, 22%, 0) rtl-ignore();
            visibility: visible;
        }

        > .b-toysfinder__refinement-value {
            // Firework
            &::before {
                opacity: 1;
                transform: translate3d(-50%, -10%, 0) scale(0.7) rtl-ignore();
            }
        }
    }
}
